<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>寻根究底 Logging - Spring Boot 日志概述 | TRAMP 的博客</title>
    <meta name="google-site-verification" content="gpo3ea0rGprpET5g_RxvV2aCck9ML7LgjKUPPrGb8OA" />
    <meta name="baidu-site-verification" content="vQbbxwcRRY" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Spring Boot 日志概述Spring Boot 采用 Commons Logging 作为内部的日志框架。对于日志的具体实现，则没有限制。默认的提供了对Java Util Logging，Log4J2 和 Logback 的支持。每种方式下，Console 的日志输出，作为默认的日志输出。在默认情况下，采用Starters 来启动Spring Boot 项目，Logback 是默认的日志实">
<meta property="og:type" content="article">
<meta property="og:title" content="寻根究底 Logging - Spring Boot 日志概述">
<meta property="og:url" content="https://zhangzhaoyu.github.io/2016/11/16/spring-boot-logging-introduction/index.html">
<meta property="og:site_name" content="TRAMP 的博客">
<meta property="og:description" content="Spring Boot 日志概述Spring Boot 采用 Commons Logging 作为内部的日志框架。对于日志的具体实现，则没有限制。默认的提供了对Java Util Logging，Log4J2 和 Logback 的支持。每种方式下，Console 的日志输出，作为默认的日志输出。在默认情况下，采用Starters 来启动Spring Boot 项目，Logback 是默认的日志实">
<meta property="og:image" content="https://zhangzhaoyu.github.io/css/images/spring/spring.png">
<meta property="og:updated_time" content="2016-11-21T01:56:52.856Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="寻根究底 Logging - Spring Boot 日志概述">
<meta name="twitter:description" content="Spring Boot 日志概述Spring Boot 采用 Commons Logging 作为内部的日志框架。对于日志的具体实现，则没有限制。默认的提供了对Java Util Logging，Log4J2 和 Logback 的支持。每种方式下，Console 的日志输出，作为默认的日志输出。在默认情况下，采用Starters 来启动Spring Boot 项目，Logback 是默认的日志实">
<meta name="twitter:image" content="https://zhangzhaoyu.github.io/css/images/spring/spring.png">
    

    
        <link rel="alternate" href="/atom.xml" title="TRAMP 的博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
    
    
    
        <script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?0fea9e168848e7221797106a355334d0";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">TRAMP 的博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">主页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签云</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">主页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签云</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">张兆玉</h2>
            <h3 id="title">R&amp;D &amp; Coder</h3>
            <span id="location"><i class="fa fa-map-marker"></i>中国 - 北京</span>
            <a id="follow" target="_blank" href="https://github.com/zhangzhaoyu/">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                10
                <span>文章</span>
            </div>
            <div class="article-info-block">
                9
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/zhangzhaoyu/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://weibo.com/getmeng/" target="_blank" title="weibo" class=tooltip>
                            <i class="fa fa-weibo"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-spring-boot-logging-introduction" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
        <header class="article-header">
            
    
        <h1 class="article-title" itemprop="name">
            寻根究底 Logging - Spring Boot 日志概述
        </h1>
    

            
            <div class="article-meta">
                
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2016/11/16/spring-boot-logging-introduction/">
            <time datetime="2016-11-16T14:07:26.000Z" itemprop="datePublished">2016-11-16</time>
        </a>
    </div>


                
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Boot/">Spring Boot</a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/logging/">-logging</a>
    </div>

            </div>
            
        </header>
        
        
        <div class="article-entry" itemprop="articleBody">
            
            
            <div id="toc" class="toc-article">
                <strong class="toc-title">文章目录</strong>
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Boot-日志概述"><span class="toc-number">1.</span> <span class="toc-text">Spring Boot 日志概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#默认日志"><span class="toc-number">2.</span> <span class="toc-text">默认日志</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#引入Staters-后的日志依赖"><span class="toc-number">2.1.</span> <span class="toc-text">引入Staters 后的日志依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日志格式"><span class="toc-number">2.2.</span> <span class="toc-text">日志格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制台输出"><span class="toc-number">2.3.</span> <span class="toc-text">控制台输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Color-coded-输出"><span class="toc-number">2.4.</span> <span class="toc-text">Color-coded 输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件输出"><span class="toc-number">2.5.</span> <span class="toc-text">文件输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日志等级"><span class="toc-number">2.6.</span> <span class="toc-text">日志等级</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#自定义配置"><span class="toc-number">3.</span> <span class="toc-text">自定义配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置概述"><span class="toc-number">3.1.</span> <span class="toc-text">配置概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义配置文件加载"><span class="toc-number">3.2.</span> <span class="toc-text">自定义配置文件加载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#系统变量"><span class="toc-number">3.3.</span> <span class="toc-text">系统变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Logback-扩展"><span class="toc-number">3.4.</span> <span class="toc-text">Logback 扩展</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考引用"><span class="toc-number">4.</span> <span class="toc-text">参考引用</span></a></li></ol>
            </div>
            
            <h1 id="Spring-Boot-日志概述"><a href="#Spring-Boot-日志概述" class="headerlink" title="Spring Boot 日志概述"></a>Spring Boot 日志概述</h1><p>Spring Boot 采用 <code>Commons Logging</code> 作为内部的日志框架。对于日志的具体实现，则没有限制。默认的提供了对<code>Java Util Logging</code>，<code>Log4J2</code> 和 <code>Logback</code> 的支持。每种方式下，<code>Console</code> 的日志输出，作为默认的日志输出。<br>在默认情况下，采用<code>Starters</code> 来启动Spring Boot 项目，<code>Logback</code> 是默认的日志实现方案。当然，Logback 路由能够保证依赖的包使用的其他日志也可以很好的工作。<br><a id="more"></a></p>
<h1 id="默认日志"><a href="#默认日志" class="headerlink" title="默认日志"></a>默认日志</h1><h2 id="引入Staters-后的日志依赖"><a href="#引入Staters-后的日志依赖" class="headerlink" title="引入Staters 后的日志依赖"></a>引入Staters 后的日志依赖</h2><p>Spring Boot 采用<code>Starters</code> 的方式引入对应的<code>Jar</code> 后，会对应的引入基础的项目依赖项，包括日志的依赖项。由于<code>apache commons logging</code> 是一个历史悠久的日志框架，Spring 项目在<code>Core</code> 中对其进行了依赖。<br>当采用<code>org.springframework.boot:spring-boot-starter</code> 和 <code>org.springframework.boot:spring-boot-starter-web</code> 构建一个基础的Spring Boot项目时，项目产生的<code>Jar</code> 依赖如下图所示：</p>
<p><img src="boot-log-dependency.png" alt="Spring Boot 基础项目依赖图"></p>
<p>由上图可以看出，Spring Boot 的基础<code>spring-boot-starter</code> 引入后，自动引入了<code>SLF4J</code> 提供的桥接功能<code>org.slf4j:jcl-over-slf4j:jar</code> 将<code>JCL</code> 的日志实现桥接到<code>SLF4J</code> 上，而<code>SLF4J</code> 直接采用了<code>logback</code> 日志实现框架。同时，也引入了对其<code>JUL</code> 和<code>Log4j</code>桥接。当引入<code>spring-boot-starter-web</code> 后加入了对<code>org.jboss.logging:jboss-logging:jar</code> 的依赖。关于<code>SLF4J</code> 的具体介绍参见<a href="2016/11/18/spring-boot-logging-slf4j/">寻根究底 LOGGING - SLF4J 日志FACADE 概述</a>。</p>
<h2 id="日志格式"><a href="#日志格式" class="headerlink" title="日志格式"></a>日志格式</h2><p>默认的日志格式如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2014-03-05 10:57:51.112  INFO 45469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.52</div><div class="line">2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]</div></pre></td></tr></table></figure>
<p>具体的含义如下：</p>
<ul>
<li>精确到毫秒的日期和时间</li>
<li>Log Level - <code>ERROR</code>，<code>WARN</code>，<code>INFO</code> 或者 <code>TRACE</code></li>
<li>进程ID</li>
<li><code>---</code> 具体的日志内容的分隔符</li>
<li>线程名字</li>
<li>Logger Name - 通常是定义日志记录的类名</li>
<li>具体的日志内容</li>
</ul>
<blockquote>
<p>需要注意的是Logback 没有 <code>FATAL</code> 的日志级别，它被映射到<code>ERROR</code></p>
</blockquote>
<h2 id="控制台输出"><a href="#控制台输出" class="headerlink" title="控制台输出"></a>控制台输出</h2><p>默认的日志配置会将ERROR，WARN 和 INFO级别的日志输出到控制台。我们也可以使用”DEBUG” 模式才输出更多的内容。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ java -jar myapp.jar --debug</div></pre></td></tr></table></figure></p>
<p>也可以在Spring Boot的配置文件<code>application.properties</code> 中配置<code>debug=true</code> 来开启更多的日志输出功能。此模式只能输出被选择的核心logger 来输出更多的消息，例如内嵌的容器，Hibernate 和spring Boot。我们自己的应用并不会输出Debug 级别的日志。另外同上我们也可以配置<code>trace</code> 模式来输出更多的日志内容，但也只是一个被选择的核心Logger 列表。</p>
<h2 id="Color-coded-输出"><a href="#Color-coded-输出" class="headerlink" title="Color-coded 输出"></a>Color-coded 输出</h2><p>如果终端支持<code>ANSI</code>，将会输出彩色的日志。可以再<code>application.properties</code> 文件中设置<code>spring.output.ansi.enabled</code> 为<code>always</code>，<code>detect</code> 和<code>never</code> 来覆盖默认的级别，默认为<code>detect</code>。<br>彩色的样式采用<code>%clr</code> 来进行转换。最简单的模式就是日志将根据Level 输出为不同的颜色:</p>
<ul>
<li>FATAL : Red</li>
<li>ERROR : Red</li>
<li>WARN : Yellow</li>
<li>INFO : Green</li>
<li>DEBUG : Green</li>
<li>TRACE : Green</li>
</ul>
<p>除此之外，可以指定转换日志时的颜色，通过指定转换选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%clr(%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;)&#123;option&#125;</div></pre></td></tr></table></figure></p>
<p><code>option</code> 可以指定为：</p>
<ul>
<li>blue</li>
<li>cyan</li>
<li>faint</li>
<li>green</li>
<li>magenta</li>
<li>red</li>
<li>yellow</li>
</ul>
<h2 id="文件输出"><a href="#文件输出" class="headerlink" title="文件输出"></a>文件输出</h2><p>默认情况下，Spring Boot 仅仅将日志输出在控制台。如果需要将日志输出到文件需要在<code>application.properties</code> 中配置<code>logging.file</code> 或者 <code>logging.path</code>。</p>
<ul>
<li>logging.file : 输出到指定的文件，可以为相对路径或者绝对路径</li>
<li>logging.path : 与logging.file 是互斥的，指定文件的路径，默认的文件名为<code>spring.log</code></li>
</ul>
<p>日志文件默认达到10Mb 时，将会从新打开一个文件输出，默认的日志输出级别为ERROR，WARN 和 INFO。需要注意的是日志系统的初始化要早于系统的生命周期，因此logging properties 不能够通过@PropertySource 注解获取。</p>
<p>Logging properties 相对于实际的日志框架是独立的，因此特定的日志的配置参数并不归Spring Boot 管理。</p>
<h2 id="日志等级"><a href="#日志等级" class="headerlink" title="日志等级"></a>日志等级</h2><p>所有支持的日志系统都可以通过<code>logging.level.*</code>=LEVEL 在<code>application.properties</code> 中配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">logging.level.root=WARN</div><div class="line">logging.level.org.springframework.web=DEBUG</div><div class="line">logging.level.org.hibernate=ERROR</div></pre></td></tr></table></figure>
<p>默认条件下，Spring Boot 重新映射了Thymeleaf 的INFO 级别日志到DEBUG 级别。具体可以参见<code>LevelRemappingAppender</code> 类的细节。</p>
<h1 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h1><h2 id="配置概述"><a href="#配置概述" class="headerlink" title="配置概述"></a>配置概述</h2><p>通过将不同的日志依赖包添加到<code>classpath</code> 中，Spring Boot 的日志系统能够判断激活不同的日志实现方式。更进一步的配置是将自定义的日志配置文件添加到<code>classpath</code> 中，或者通过Spring 的<code>logging.config</code> 来指定配置文件的位置。</p>
<p>可以通过设置<code>org.springframework.boot.logging.LoggingSystem</code> 系统变量来配置一个特殊的日志系统。对应的设置值应该是<code>LoggingSystem</code> 的实现类。也可以将该变量的值设置为<code>none</code> 来关闭Spring Boot 的日志。</p>
<p>由于日志的初始化早于<code>ApplicationContext</code> 的创建，因此不能够通过<code>@Configuration</code> 文件来进行配置。只能通过系统变量或者外部的传统配置文件来进行配置。</p>
<h2 id="自定义配置文件加载"><a href="#自定义配置文件加载" class="headerlink" title="自定义配置文件加载"></a>自定义配置文件加载</h2><ul>
<li><strong>Logback</strong> : logback-spring.xml, logback-spring.groovy, logback.xml 或者logback.groovy</li>
<li><strong>Log4j2</strong> : log4j2-spring.xml 或者　log4j2.xml</li>
<li><strong>JDK(Java Util Logging)</strong> : logging.properties</li>
</ul>
<blockquote>
<p>需要注意的是官方推荐使用<code>-spring</code> 的配置方式。如果使用标准的配置方式，Spring 不能完全控制日志的初始化。此外，当采用<code>executable jar</code> 方式时，Java Util Logging 会产生已知的错误，因此要避免使用。</p>
</blockquote>
<h2 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h2><p>为了帮助实现自定义，以下的Spring Environment 变量会被转化为系统变量</p>
<ul>
<li><code>logging.exception-conversion-word</code> : <code>LOG_EXCEPTION_CONVERSION_WORD</code> : 日志异常时的转换语</li>
<li><code>logging.file</code> : <code>LOG_FILE</code> : 默认的日志文件路径和名称配置</li>
<li><code>logging.path</code> : <code>LOG_PATH</code> : 默认的日志路径配置</li>
<li><code>logging.pattern.console</code> : <code>CONSOLE_LOG_PATTERN</code> : 控制台日志的格式，只支持logback</li>
<li><code>logging.pattern.file</code> : <code>FILE_LOG_PATTERN</code> : 日志文件中日志的格式，只支持logback</li>
<li><code>logging.pattern.level</code> : <code>LOG_LEVEL_PATTERN</code> : 日志等级的格式渲染，只支持logback</li>
<li><code>PID</code> : <code>PID</code> : 当前进程的ID</li>
</ul>
<p>如果想要在日志属性中使用占位符，需要使用<a href="http://docs.spring.io/spring-boot/docs/1.4.2.RELEASE/reference/htmlsingle/#boot-features-external-config-placeholders-in-properties" target="_blank" rel="external">Spring Boot syntax</a> 而不是对应日志框架的语法。例如Logback 的属性名之间的分隔符为<code>:</code>，而不是其自身默认的<code>:-</code>。</p>
<h2 id="Logback-扩展"><a href="#Logback-扩展" class="headerlink" title="Logback 扩展"></a>Logback 扩展</h2><p>为了实现Spring 对logback 的扩展，我们需要将logback 的配置文件的名字定义为<code>logback-spring.xml</code>，或者采用<code>logging.config</code> 来指定配置文件的位置。</p>
<p>Spring Boot 可以采用<code>&lt;springProfile&gt;</code> 标签来激活不同的Spring Profile 配置。Profile 片段可以定义在<code>&lt;configuration&gt;</code> 元素的任何位置。可以使用<code>name</code> 属性来指明需要接受的profile 类型。可以用<code>,</code> 来指定多个profile。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"staging"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- configuration to be enabled when the "staging" profile is active --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev, staging"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- configuration to be enabled when the "dev" or "staging" profiles are active --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!production"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- configuration to be enabled when the "production" profile is not active --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Spring Boot 也可以采用<code>&lt;springProperty&gt;</code> 标签来获取在Spring Environment 中定义的属性。也就是说可以在logback 配置文件中获取在<code>application.properties</code> 中定义的变量。通常它也能直接工作在logbak 的<code>&lt;property&gt;</code> 标签中。具体配置如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"fluentHost"</span> <span class="attr">source</span>=<span class="string">"myapp.fluentd.host"</span></span></div><div class="line">        <span class="attr">defaultValue</span>=<span class="string">"localhost"</span>/&gt;</div><div class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"FLUENT"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.more.appenders.DataFluentAppender"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">remoteHost</span>&gt;</span>$&#123;fluentHost&#125;<span class="tag">&lt;/<span class="name">remoteHost</span>&gt;</span></div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>此处采用的是<code>RelaxedPropertyResolver</code> 来获取Spring Environment 变量，因此在定义source的时候的变量采用虚线连接时，对应的变量可以松散的匹配。比如<code>my-property-name</code> 将会匹配<code>myPropertyName</code> 和<code>MY_PROPERTY_NAME</code>。</p>
<h1 id="参考引用"><a href="#参考引用" class="headerlink" title="参考引用"></a>参考引用</h1><ol>
<li><a href="http://docs.spring.io/spring-boot/docs/1.4.2.RELEASE/reference/htmlsingle/#boot-features-logging" target="_blank" rel="external">Spring Boot Logging</a></li>
</ol>
<hr>
<p>本文章采用<a href="https://creativecommons.org/licenses/by/2.5/cn/" target="_blank" rel="external">知识共享署名 2.5 中国大陆许可协议</a>进行许可。<br>欢迎转载，但转载请注明来自<a href="https://zhangzhaoyu.github.io/">张兆玉</a>，并保持转载后文章内容的完整。本人保留所有版权相关权利。<br>本文链接：<a href="https://zhangzhaoyu.github.io/2016/11/16/spring-boot-logging-introduction/">https://zhangzhaoyu.github.io/2016/11/16/spring-boot-logging-introduction/</a></p>

            
        </div>
        <footer class="article-footer">
            <div class="share-container">

    <div class="jiathis_style">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_qzone">QQ空间</a>
    <a class="jiathis_button_tsina">新浪微博</a>
    <a class="jiathis_button_tqq">腾讯微博</a>
    <a class="jiathis_button_weixin">微信</a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
    <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<style>
    .jiathis_style div:first-child:not(.jiadiv_01) {
        width: auto !important;
        border: none !important;
    }
    .jiathis_style .jiadiv_01 {
        margin: 10px 0;
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .jiathis_style .jiadiv_01 div:first-child {
        display: none;
    }
    .jiathis_style .jiadiv_02 {
        padding: 7px 0 !important;
    }
    .jiathis_style .jiadiv_02 .jiatitle {
        width: 85px;
        border: none;
        height: auto;
        margin: 3px 10px;
        padding: 6px 10px;
        border-radius: 4px;
    }
    .jiathis_style .jiadiv_02 .jiatitle:hover {
        border: none;
    }
    .jiathis_style .jiadiv_02 .jiatitle:nth-child(even) {
        margin-left: 0;
    }
    .jiathis_style .jtico:hover {
        opacity: 1;
    }
    .jiathis_style .ckepopBottom,
    .jiathis_style .centerBottom {
        width: auto !important;
        padding: 5px;
        background: #f7f7f7;
    }
</style>



</div>

            
    
        <a href="https://zhangzhaoyu.github.io/2016/11/16/spring-boot-logging-introduction/#comments" class="article-comment-link ds-thread-count" data-thread-key="2016/11/16/spring-boot-logging-introduction/">评论</a>
    

        </footer>
    </div>
    
    
<nav id="article-nav">
    
        <a href="/2016/11/18/spring-boot-logging-slf4j/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    寻根究底 Logging - SLF4J 日志Facade 概述
                
            </div>
        </a>
    
    
        <a href="/2016/10/21/jms-activemq-queue-md/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">ActiveMQ 寻根究低 - 点对点模式详解</div>
        </a>
    
</nav>


    

    <!-- donate -->
    

    
    <!-- css -->
    <style type="text/css">
        .center {
            text-align: center;
        }
        .hidden {
            display: none;
        }
        .donate_bar a.btn_donate{
            display: inline-block;
            width: 82px;
            height: 82px;
            background: url("http://7xsl28.com1.z0.glb.clouddn.com/btn_reward.gif") no-repeat;
            _background: url("http://7xsl28.com1.z0.glb.clouddn.com/btn_reward.gif") no-repeat;

        <!-- http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif
        因为本 hexo 生成的博客所用的 theme 的 a:hover 带动画效果，
        为了在让打赏按钮显示效果正常 而 添加了以下几行 css，
        嵌入其它博客时不一定要它们。 -->
            -webkit-transition: background 0s;
            -moz-transition: background 0s;
            -o-transition: background 0s;
            -ms-transition: background 0s;
            transition: background 0s;
        <!-- /让打赏按钮的效果显示正常 而 添加的几行 css 到此结束 -->
        }

        .donate_bar a.btn_donate:hover{ background-position: 0px -82px;}
        .donate_bar .donate_txt {
            display: block;
            color: #9d9d9d;
            font: 14px/2 "Microsoft Yahei";
        }
        .bold{ font-weight: bold; }
    </style>
    <!-- /css -->

    <!-- Donate Module -->
    <div id="donate_module">

        <!-- btn_donate & tips -->
        <div id="donate_board" class="donate_bar center">
            <br>
            ------------------------------------------------------------------------------------------------------------------------------
            <br>
            <a id="btn_donate" class="btn_donate" target="_self" href="javascript:;" title="Donate 打赏"></a>
            <span class="donate_txt">
          欣赏此文？ Donate me !
        </span>


        </div>
        <!-- /btn_donate & tips -->

        <!-- donate guide -->

        <div id="donate_guide" class="donate_bar center hidden">
            <br>
            ------------------------------------------------------------------------------------------------------------------------------
            <br>

            <a href="/css/images/weixin.jpg" title="用微信扫一扫哦~" class="fancybox" rel="article0">
                <img src="/css/images/weixin.jpg" title="微信打赏 Tramp" height="190px" width="auto"/>
            </a>

            &nbsp;&nbsp;

            <a href="/css/images/zhifubao.jpg" title="用支付宝扫一扫即可~" class="fancybox" rel="article0">
                <img src="/css/images/zhifubao.jpg" title="支付宝打赏 Tramp" height="190px" width="auto"/>
            </a>

            <span class="donate_txt">
          欣赏此文？ Donate me !
        </span>

        </div>
        <!-- /donate guide -->

        <!-- donate script -->
        <script type="text/javascript">
            document.getElementById('btn_donate').onclick = function() {
                $('#donate_board').addClass('hidden');
                $('#donate_guide').removeClass('hidden');
            }

            function donate_on_web(){
                $('#donate').submit();
            }

            var original_window_onload = window.onload;
            window.onload = function () {
                if (original_window_onload) {
                    original_window_onload();
                }
                document.getElementById('donate_board_wdg').className = 'hidden';
            }
        </script>
        <!-- /donate script -->
    </div>
    <!-- /Donate Module -->
    
    

</article>



    <section id="comments">
    
        
    <div class="ds-thread " data-thread-key="2016/11/16/spring-boot-logging-introduction/" data-title="寻根究底 Logging - Spring Boot 日志概述" data-url="https://zhangzhaoyu.github.io/2016/11/16/spring-boot-logging-introduction/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>





    <script type="text/javascript">
    var duoshuoQuery = {short_name:'anicloud'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/12/23/spring-security-2016-12-23-spring-security-01/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/spring/spring.png)" alt="寻根究底 Spring Security - 概述与快速启动" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Spring-4-x/">Spring 4.x</a></p>
                            <p class="item-title"><a href="/2016/12/23/spring-security-2016-12-23-spring-security-01/" class="title">寻根究底 Spring Security - 概述与快速启动</a></p>
                            <p class="item-date"><time datetime="2016-12-23T09:09:45.000Z" itemprop="datePublished">2016-12-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/12/15/elkbx-2016-12-15-elasticsearch-learning-guide-01/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/thumb/elasticsearch.png)" alt="寻根究底ELKBX - Elasticsearch 概述" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/elkbx/">elkbx</a></p>
                            <p class="item-title"><a href="/2016/12/15/elkbx-2016-12-15-elasticsearch-learning-guide-01/" class="title">寻根究底ELKBX - Elasticsearch 概述</a></p>
                            <p class="item-date"><time datetime="2016-12-15T14:17:26.000Z" itemprop="datePublished">2016-12-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/18/spring-boot-logging-slf4j/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/spring/spring.png)" alt="寻根究底 Logging - SLF4J 日志Facade 概述" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Spring-Boot/">Spring Boot</a></p>
                            <p class="item-title"><a href="/2016/11/18/spring-boot-logging-slf4j/" class="title">寻根究底 Logging - SLF4J 日志Facade 概述</a></p>
                            <p class="item-date"><time datetime="2016-11-18T13:50:01.000Z" itemprop="datePublished">2016-11-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/16/spring-boot-logging-introduction/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/spring/spring.png)" alt="寻根究底 Logging - Spring Boot 日志概述" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Spring-Boot/">Spring Boot</a></p>
                            <p class="item-title"><a href="/2016/11/16/spring-boot-logging-introduction/" class="title">寻根究底 Logging - Spring Boot 日志概述</a></p>
                            <p class="item-date"><time datetime="2016-11-16T14:07:26.000Z" itemprop="datePublished">2016-11-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/10/21/jms-activemq-queue-md/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/thumb/mq.png)" alt="ActiveMQ 寻根究低 - 点对点模式详解" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/ActiveMQ/">ActiveMQ</a></p>
                            <p class="item-title"><a href="/2016/10/21/jms-activemq-queue-md/" class="title">ActiveMQ 寻根究低 - 点对点模式详解</a></p>
                            <p class="item-date"><time datetime="2016-10-21T06:52:32.000Z" itemprop="datePublished">2016-10-21</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ActiveMQ/">ActiveMQ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-4-x/">Spring 4.x</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Boot/">Spring Boot</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/diary/">diary</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/elkbx/">elkbx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
<div class="widget-wrap">
    <h3 class="widget-title">最近评论</h3>
    <div class="widget">
        <ul class="ds-recent-comments" data-num-items="5" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="30"></ul>
    </div>
</div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 张兆玉<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. <br>
            
            <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cspan id='cnzz_stat_icon_1260489787'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1260489787%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
            
            <br/>
            <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">博客总点击量： <span id="busuanzi_value_site_pv"></span></span>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'anicloud'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>